# 概述
bybit 使用 `报单成交率` 、`流动性贡献打分`来评价用户对改善bybit可执行流动性作出的贡献，不同`symbol`的`贡献分`和`报单成交率`是独立计算的。

# 报单成交率 
平台上每天提交超过 `2000` 个报单的账户，需要保持 7天的 `报单成交率`高于最小报单成交率门槛值，违反此规则将会被降低频率或禁用 API。


## 报单成交率
> `报单成交率`  定义为 一段时间段内，用户已成交报单数量占该用户已提交报单数量的比例。

> `已提交报单`  是任何已成功发送到平台的委托

> `已成交报单`   是成交了任何数量的委托

> `报单成交率 = ( 一段时间内用户的已成交报单数量 / 一段时间内已提交报单数量)`


## 报单成交率举例
A用户成功提交一份限价委托请求，其中包含 4 个不同价格的竞买和 2 个不同价格的竞卖，并被放入交易委托账本中。然后，该用户提交撤单请求，撤了取消了其中的2个竞买请求，并重新提交了一份竞买报单请求，其中包括两个新的竞买报单。

此时，B用户提交了一份市价卖单，该指令与A用户在委托队列中的 2 个竞买发生了成交。
该时间段内的报单成交率：

```
A用户：
已成交报单数量 = 2
已提交报单数量 =8
QFR = 2 / 8 = 25％
```
```
B用户：
已成交报单数量 = 1
已提交报单数量 =1
QFR = 1 / 1 = 100％
```

## API 交易用户最小报单成交率门槛
API 交易用户最小报单成交率门槛      0.1%

---

# API 交易用户提高频率的条件
平台会根据API用户近7日挂单对平台流动性贡献分的最低值，对满足条件的用户进行提高频率上限的奖励

|  流动性贡献分    | 频率 |
|  ----    | ----  |
| 20-100   | 1分钟800次 |
| 10-20    | 1分钟600次 |
| 5-10     | 1分钟400次 |
| 2-5      | 1分钟200次 |
| <2       | 1分钟100次 |

## 流动性贡献打分

> `流动性贡献打分 = 有效价格挂单自占比 * 有效价格挂单量平台占比 * 100` 


## 名词解释

### 有效价格挂单

> `有效价格挂单` 定义为在距离盘口中间价较近的规定范围内的挂单被定义为有效价格挂单

> `最佳竞价中间价： (最佳竞买价 + 最佳竞卖价) 的均值

> `最佳竞价中间价 = 1/2*（最佳竞买价 + 最佳竞卖价）`

> `“有效价格”范围：[ 最佳竞价中间价 - 3 * 价格最小变动单位,  最佳竞价中间价 + 3 * 价格最小变动单位]
举例：
BTC最佳竞买价 = 10000
BTC最佳竞卖价 = 10001
“有效价格”范围：[(10000 + 10001) / 2 - 3* 0.5, (10000 + 10001) / 2 + 3* 0.5] = [9999,10002]


### 有效价格挂单自占比
> `有效价格挂单自占比`   定义为该用户在` 有效价格` 范围内的挂单数量占该用户在当前时间提交的挂单总数量的比例

每秒计算 该用户在“有效价格”范围内的报挂单数量 /该用户提交的挂单总数量，然后每日计算用户当日占比的平均值
#### 有效价格挂单自占比举例：
某用户在交易委托账本中共有 10000张竞价买单，其中 2000 张报价为9995，8000 张报价为9999
当时“有效价格”范围：[9999,  10002]

```
该用户在“有效价格”范围内的挂单数量 = 8000
该用户提交的挂单总数量 = 10000
有效价格挂单自占比 = 8000 / 10000 = 0.8
```
### 有效价格挂单量平台占比
> `有效价格挂单量平台占比 ` 定义为该用户在`有效价格`范围内的挂单数量占平台所有用户在“有效价格”范围内的挂单总数量的比例 

每秒计算  该用户在“有效价格”范围内的挂单数量 / 平台所有用户在“有效价格”范围内的挂单总数量，然后每日计算用户当日占比的平均值

#### 有效价格挂单量平台占比举例：
某一秒，用户在“有效价格”范围：[9999,  10002] 内的挂单有8000张，全平台的交易委托账本在 [9999,  10002] 内的挂单总量为200000

```
该用户在“有效价格”范围内的挂单数量 = 8000
平台所有用户在“有效价格”范围内的挂单总数量 = 200000
有效价格挂单量平台占比 = 8000 / 200000 = 0.04
```


如果机制有更新，我们会提前通过官网提前通知。

